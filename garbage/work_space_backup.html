{% extends "layout.html" %}
{% load static %}

{% block script %}
    <script src="{% static 'js/source_forms.js' %}"></script>
    <script src="{% static 'js/work_space_parts.js' %}"></script>
    <script src="{% static 'js/work_space.js' %}"></script>
    <script src="{% static 'js/paper_space.js' %}"></script>
{% endblock %}

{% block title %}
    {{ space }}
{% endblock %}

{% block header %}
   {{ space }}
{% endblock %}

{% block body %}

    
    <form action="{% url 'work_space:rename_space' space.pk %}" id="rename_space_form" method="post">
        {% csrf_token %} 
        {{ rename_form }}
        <button type="submit">Rename space</button>
    </form><br><br>

    <form action="{% url 'paper_work:create_paper' space.pk %}" method="post">
        {% csrf_token %} 
        {{ new_paper_form }}
        <button id="change_password_button" type="submit">Add Paper</button>
    </form>

    <h3>Papers</h3>
    {% for paper in papers %}
        <!-- Button trigger modal -->
        <button onclick="load_and_show_paper_space('{{ paper.pk }}')" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#paper-space-{{ paper.pk }}">
            {{ paper }}
        </button>
        <!-- Modal -->
        <div class="modal fade" id="paper-space-{{ paper.pk }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="paper-space-label-{{ paper.pk }}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="paper-space-label-{{ paper.pk }}">{{ paper }}</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="paper-space-div-{{ paper.pk }}"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Understood</button>
                    </div>
                </div>
            </div>
        </div><br><br>
    {% endfor %}

    <h3>Sources</h3>

    {% for source in sources %}
        <!-- Button trigger modal -->
        <button onclick="load_and_show_source_space('{{ source.pk }}')" type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#source-space-{{ source.pk }}">
            {{ source }}
        </button>
        <!-- Modal -->
        <div class="modal fade" id="source-space-{{ source.pk }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="source-space-label-{{ source.pk }}" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="source-space-label-{{ source.pk }}">{{ source }}</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body" id="source-space-div-{{ source.pk }}"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary">Understood</button>
                    </div>
                </div>
            </div>
        </div><br><br>
    {% endfor %}


    <li>
        <a href="{% url 'work_space:download_space' space.pk %}">Download space</a>
    </li><br><br><br>
    

    <button class="show_form_button" id="book" type="button">book</button>
    <button class="show_form_button" id="article" type="button">article</button>
    <button class="show_form_button" id="chapter" type="button">chapter</button>
    <button class="show_form_button" id="webpage" type="button">webpage</button>

    <form action="{% url 'bookshelf:add_source' space.pk %}" method="post" id="book_form" class="source_form">
        <div class="author_div"></div>
        {% csrf_token %} 
        {{ book_form.as_p }}
        <button value="book" name="book" type="submit">Add Book</button>
    </form>
    <form action="{% url 'bookshelf:add_source' space.pk %}" method="post" id="article_form" class="source_form">
        <div class="author_div"></div>
        {% csrf_token %} 
        {{ article_form.as_p }}
        <button value="article" name="article" type="submit">Add Article</button>
    </form>
    <form action="{% url 'bookshelf:add_source' space.pk %}" method="post" id="chapter_form" class="source_form">
        <div id="chapter_author_div"></div>
        {% csrf_token %}
        {{ chapter_form.as_p }}
        <div class="author_div"></div>
        <button value="chapter" name="chapter" type="submit">Add Chapter</button>
    </form>
    <form action="{% url 'bookshelf:add_source' space.pk %}" method="post" id="webpage_form" class="source_form">
        <div class="author_div"></div>
        {% csrf_token %} 
        {{ webpage_form.as_p }}
        <button value="webpage" name="webpage" type="submit">Add Webpage</button>
    </form><br><br><br><br>


    <h4>New Link:</h4>
    <form action="{% url 'work_space_parts:add_link' space.pk %}" id="link_form" method="post">
        {% csrf_token %} 
        {{ link_form }}
        <button type="submit">Add Link</button>
    </form><br><br>


    <h3>Alter Links:</h3>

    <br><br><br>

    <div id="space_id" style="display: none;">{{ space.pk }}</div>



    


{% endblock %}
